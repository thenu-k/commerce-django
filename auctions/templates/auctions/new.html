{% extends "auctions/layout.html" %}
{% block body %}
<form onsubmit="handleSubmit(event)">
    <input type="text" placeholder="title" id="titleInput"><br/>
    <select name="" id="categoryInput">
        <option value="misc" default>Miscellaneous</option>
        <option value="clothing">Clothing</option>
    </select><br/>
    <input type="text" placeholder="Base Bid" id="bidInput">
    <button type="submit">Submit</button>
</form>
</body>
<script defer>
    const handleSubmit = (e) => {
        e.preventDefault()
        console.log("Submitting form")
        const payload = {
            title: e.target.querySelector('#titleInput').value,
            category: e.target.querySelector('#categoryInput').value,
            baseBid: e.target.querySelector('#bidInput').value
        }
        fetch("/createListing",
        {
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        method: "POST",
        body: JSON.stringify(payload)
        })
        .then((res) => {res.json()})
        .then((data) => {console.log(data)})
        .catch((err)=>{console.log(err)})
    }
</script>
{% endblock %}